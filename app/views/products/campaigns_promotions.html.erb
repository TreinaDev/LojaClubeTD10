<div class="container shadow p-2 mb-4 bg-body-tertiary rounded">
  <div class="card-body">
    <h3 class="card-title mb-4 fw-bold">Produto <%= @product.code %> - <%= @product.name %></h3>
    <dl class="row text-muted">
      <dt class="col-sm-6 fw-bold">Descrição</dt>
      <dd class="col-sm-6"><%= @product.description %></dd>
      <dt class="col-sm-6">Marca</dt>
      <dd class="col-sm-6"><%= @product.brand %></dd>
      <dt class="col-sm-6"><%= "Preço" %> </dt>
      <dd class="col-sm-6"><%= "#{show_price(@product.price)}" %></dd>
      <dt class="col-sm-6">Categoria</dt>
      <dd class="col-sm-6"><%= @product.product_category.name %></dd>
    </dl>
  </div>
  <hr>
  <div class="container p-2">
    <%= link_to 'Cadastrar preço sazonal', new_seasonal_price_path(product_id: @product.id), class: 'btn btn-secondary' %>
  </div>
  <hr>
  <% if @campaigns.any? || @promotions.any? %>
    <div class="container p-2 mt-4">
      <h4 class="text-center mb-4">Preços Sazonais aplicados a esse produto</h4>
      <% if @promotions.any? %>
        <table class="table table-striped table-hover mt-4">
          <thead>
            <tr class="text-center">
            <th><%= SeasonalPrice.human_attribute_name(:start_date) %></th>
            <th><%= SeasonalPrice.human_attribute_name(:end_date) %></th>
            <th><%= SeasonalPrice.human_attribute_name(:value) %></th>
            </tr>
          </thead>
          <tbody class="table-group-divider">
            <% @promotions.each do |promotion| %>
              <tr class="text-center">
                <td><%= l(promotion.start_date) %></td>
                <td><%= l(promotion.end_date) %></td>
                <td><%= number_to_currency(promotion.value) %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      <% else %>
        <p class="text-center">Não existem Preços Sazonais aplicados a esse produto</p>
      <% end %>
    </div>
    <hr>
    <div class="container p-2 mt-4">
      <% if @campaigns.any? %>
        <h4 class="text-center mb-4">Campanhas aplicadas à categoria desse produto</h4>
        <table class="table table-striped table-hover mt-4">
          <thead>
            <tr class="text-center">
            <th><%= PromotionalCampaign.human_attribute_name(:name) %></th>
            <th><%= Company.human_attribute_name(:brand_name) %></th>
            <th><%= PromotionalCampaign.human_attribute_name(:start_date) %></th>
            <th><%= PromotionalCampaign.human_attribute_name(:end_date) %></th>
            <th><%= CampaignCategory.human_attribute_name(:discount) %></th>
            </tr>
          </thead>
          <tbody class="table-group-divider">
            <% @campaigns.each do |campaign| %>
              <tr class="text-center">
                <td><%= campaign.name%></td>
                <td><%= campaign.company.brand_name%></td>
                <td><%= I18n.l(campaign.start_date) %></td>
                <td><%= I18n.l(campaign.end_date) %></td>
                <td><%= "#{@product.product_category.campaign_categories.where(promotional_campaign_id: campaign.id).first.discount}% de desconto" %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      <% else %>
        <p class="text-center">Não existem Campanhas aplicadas à categoria desse produto</p>
      <% end %>
    </div>
  <% else %>
    <p class="text-center">Nenhuma Campanha Promocional ou Preço Sazonal para este produto</p>
  <% end %>
</div>