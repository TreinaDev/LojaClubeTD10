<div class="row my-5">
  <div class="col-6">
    <div class="d-flex gap-2">
      <% if @product.product_images.attached? %>
        <div class="d-inline-flex flex-column flex-wrap gap-2" id="images">
          <% @product.product_images.each do |image| %>
            <div>
              <%= image_tag(image, class:"resize-sml img-cursor", data: { controller: "images", action: "click->images#change" }) %>
            </div>
          <% end %>
        </div>
        <div id="display-area">
          <%= image_tag(@product.product_images[0], class: 'resize-big image-size', id: 'displayed-image')%>
        </div>
      <% end %>
    </div>
  </div>
  <div class="col-6">
    <div class="card-body">
      <h3 class="card-title mb-4 fw-bold">Produto <%= @product.name %> - <%= @product.code %></h3>
      <dl class="row text-muted">
        <dt class="col-sm-6 fw-bold">Descrição</dt>
        <dd class="col-sm-6"><%= @product.description %></dd>
        <dt class="col-sm-6">Marca</dt>
        <dd class="col-sm-6"><%= @product.brand %></dd>
        <dt class="col-sm-6">Preço</dt>
        <dd class="col-sm-6"><%= number_to_currency @product.price %></dd>
        <dt class="col-sm-6">Categoria</dt>
        <dd class="col-sm-6"><%= @product.product_category.name %></dd>
      </dl>
    </div>
  </div>

  <% if user_signed_in? && current_user.common? %>
    <div style="margin-top:20px;">
      <%= form_with(url: add_shopping_carts_path) do |f| %>
        <%= f.hidden_field :id, value: @product.id %>
        <div class="form-group" style="margin-bottom:10px;">
          <%= f.label :quantity, "Quantidade", class: "form-label" %>
          <button type="button" id="decrease_button" class="clean-button" data-controller="quantity" data-action="click->quantity#decrement">-</button>
          <%= f.number_field :quantity, value: 1, class: "text-center", style: "width: 4em;", id: "number_field" %>
          <button type="button" id="increase_button" class="clean-button" data-controller="quantity" data-action="click->quantity#increment">+</button>
        </div>
        <div class="actions"><%= f.submit "Adicionar ao carrinho", class: "btn btn-success mb-3" %></div>
      <% end %>
    </div>
  <% end %>
</div>


